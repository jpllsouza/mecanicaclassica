<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Performance de Motores - A. Graham Bell</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: var(--primary);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            padding: 20px;
        }
        
        .results-section {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .section-title {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            margin-top: 20px;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result-item {
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .result-label {
            font-weight: 600;
            color: var(--secondary);
        }
        
        .result-value {
            font-weight: bold;
            color: var(--primary);
        }
        
        .warning {
            color: var(--warning);
            font-weight: bold;
        }
        
        .danger {
            color: var(--danger);
            font-weight: bold;
        }
        
        .success {
            color: var(--success);
            font-weight: bold;
        }
        
        .hidden {
            display: none;
        }
        
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 16px;
            width: 25%;
        }
        
        .tab button:hover {
            background-color: #ddd;
        }
        
        .tab button.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border-top: none;
        }
        
        .tabcontent.active {
            display: block;
            animation: fadeEffect 1s;
        }
        
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        
        .engine-image {
            text-align: center;
            margin: 20px 0;
        }
        
        .engine-image img {
            max-width: 50%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .engine-placeholder {
            text-align: center;
            font-size: 50px;
            margin: 20px 0;
            color: var(--primary);
        }
        
        .gearbox {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .gear-input {
            display: flex;
            flex-direction: column;
        }
        
        .gear-input label {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: var(--secondary);
            color: white;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .tab button {
                width: 50%;
                font-size: 14px;
            }
            
            .gearbox {
                grid-template-columns: 1fr;
            }
            
            .engine-image img {
                max-width: 80%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Calculadora de Performance de Motores</h1>
            <p class="subtitle">Baseado na obra "Performance de motores de 4 tempos" de A. Graham Bell</p>
        </header>
        
        <div class="engine-image">
            <img src="asset/img/antoinette-v-16-engine-display.jpg" alt="Motor Antoinette V-16" onerror="this.style.display='none'; document.getElementById('engine-placeholder').style.display='block';">
            <div id="engine-placeholder" class="engine-placeholder" style="display: none;">⚙️</div>
        </div>
        
        <div class="tab">
            <button class="tablinks active" onclick="openTab(event, 'Velocidade')">Velocidade Máxima</button>
            <button class="tablinks" onclick="openTab(event, 'Aceleracao')">Aceleração</button>
            <button class="tablinks" onclick="openTab(event, 'Rampa')">Rampa</button>
            <button class="tablinks" onclick="openTab(event, 'Carga')">Carga</button>
        </div>
        
        <div class="content">
            <div class="input-section">
                <div id="Velocidade" class="tabcontent active">
                    <h3 class="section-title">Potência para Velocidade Máxima</h3>
                    <div class="form-group">
                        <label for="velocidadeMax">Velocidade Máxima Desejada (km/h):</label>
                        <input type="text" id="velocidadeMax" value="275" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="pesoVeiculo">Peso do Veículo (kg):</label>
                        <input type="text" id="pesoVeiculo" value="1200" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="coeficienteAr">Coeficiente de Ar (Cd):</label>
                        <input type="text" id="coeficienteAr" value="0,3" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="areaFrontal">Área Frontal (m²):</label>
                        <input type="text" id="areaFrontal" value="2,2" placeholder="Use vírgula para decimais">
                    </div>
                </div>
                
                <div id="Aceleracao" class="tabcontent">
                    <h3 class="section-title">Torque para Aceleração</h3>
                    <div class="form-group">
                        <label for="tempo0a100">Tempo 0-100 km/h (segundos):</label>
                        <input type="text" id="tempo0a100" value="8" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="tempo0a200">Tempo 0-200 km/h (segundos):</label>
                        <input type="text" id="tempo0a200" value="25" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="pesoVeiculoAcel">Peso do Veículo (kg):</label>
                        <input type="text" id="pesoVeiculoAcel" value="1200" placeholder="Use vírgula para decimais">
                    </div>
                </div>
                
                <div id="Rampa" class="tabcontent">
                    <h3 class="section-title">Torque para Subir Rampa</h3>
                    <div class="form-group">
                        <label for="inclinacaoRampa">Inclinação da Rampa (%):</label>
                        <input type="text" id="inclinacaoRampa" value="30" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="pesoVeiculoRampa">Peso do Veículo (kg):</label>
                        <input type="text" id="pesoVeiculoRampa" value="1200" placeholder="Use vírgula para decimais">
                    </div>
                </div>
                
                <div id="Carga" class="tabcontent">
                    <h3 class="section-title">Torque para Arrastar Carga</h3>
                    <div class="form-group">
                        <label for="pesoCarga">Peso da Carga a Arrastar (kg):</label>
                        <input type="text" id="pesoCarga" value="500" placeholder="Use vírgula para decimais">
                    </div>
                    <div class="form-group">
                        <label for="coeficienteAtrito">Coeficiente de Atrito:</label>
                        <input type="text" id="coeficienteAtrito" value="0,7" placeholder="Use vírgula para decimais">
                    </div>
                </div>
                
                <h3 class="section-title">Dados do Motor</h3>
                <div class="form-group">
                    <label for="diametroPistao">Diâmetro do Pistão (mm):</label>
                    <input type="text" id="diametroPistao" value="86" placeholder="Use vírgula para decimais">
                </div>
                <div class="form-group">
                    <label for="cursoPistao">Curso do Pistão (mm):</label>
                    <input type="text" id="cursoPistao" value="86" placeholder="Use vírgula para decimais">
                </div>
                <div class="form-group">
                    <label for="numCilindros">Número de Cilindros:</label>
                    <input type="text" id="numCilindros" value="4" placeholder="Use vírgula para decimais">
                </div>
                <div class="form-group">
                    <label for="numValvulas">Número de Válvulas por Cilindro:</label>
                    <input type="text" id="numValvulas" value="4" placeholder="Use vírgula para decimais">
                </div>
                <div class="form-group">
                    <label for="tamanhoBiela">Tamanho das Bielas (mm):</label>
                    <input type="text" id="tamanhoBiela" value="150" placeholder="Use vírgula para decimais">
                </div>
                
                <h3 class="section-title">Dados de Transmissão e Pneus</h3>
                <div class="form-group">
                    <label for="diametroPneu">Diâmetro do Pneu (mm):</label>
                    <input type="text" id="diametroPneu" value="650" placeholder="Use vírgula para decimais">
                </div>
                <div class="form-group">
                    <label for="tracao">Tipo de Tração:</label>
                    <select id="tracao">
                        <option value="dianteira">Dianteira</option>
                        <option value="traseira">Traseira</option>
                        <option value="4x4" selected>4x4 (Integral)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="posicaoMotor">Posição do Motor:</label>
                    <select id="posicaoMotor">
                        <option value="dianteiro">Dianteiro Longitudinal</option>
                        <option value="dianteiroTransversal" selected>Dianteiro Transversal</option>
                        <option value="central">Central</option>
                        <option value="traseiro">Traseiro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Relação de Marchas:</label>
                    <div class="gearbox">
                        <div class="gear-input">
                            <label for="marcha1">1ª Marcha:</label>
                            <input type="text" id="marcha1" value="3,4" placeholder="Ex: 3,4">
                        </div>
                        <div class="gear-input">
                            <label for="marcha2">2ª Marcha:</label>
                            <input type="text" id="marcha2" value="2,1" placeholder="Ex: 2,1">
                        </div>
                        <div class="gear-input">
                            <label for="marcha3">3ª Marcha:</label>
                            <input type="text" id="marcha3" value="1,45" placeholder="Ex: 1,45">
                        </div>
                        <div class="gear-input">
                            <label for="marcha4">4ª Marcha:</label>
                            <input type="text" id="marcha4" value="1,0" placeholder="Ex: 1,0">
                        </div>
                        <div class="gear-input">
                            <label for="marcha5">5ª Marcha:</label>
                            <input type="text" id="marcha5" value="0,8" placeholder="Ex: 0,8">
                        </div>
                        <div class="gear-input">
                            <label for="marcha6">6ª Marcha:</label>
                            <input type="text" id="marcha6" value="0,68" placeholder="Ex: 0,68">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="relacaoDiferencial">Relação do Diferencial:</label>
                    <input type="text" id="relacaoDiferencial" value="3,5" placeholder="Use vírgula para decimais">
                </div>
                
                <button class="btn" id="calcularBtn">Calcular Performance</button>
            </div>
            
            <div class="results-section">
                <h3 class="section-title">Resultados</h3>
                <div class="result-item">
                    <span class="result-label">Potência Necessária na Roda:</span>
                    <span class="result-value" id="potenciaRoda">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Torque Necessário na Roda (kgfm):</span>
                    <span class="result-value" id="torqueRoda">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Potência no Motor:</span>
                    <span class="result-value" id="potenciaMotor">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Torque no Motor (kgfm):</span>
                    <span class="result-value" id="torqueMotor">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Cilindrada Total:</span>
                    <span class="result-value" id="cilindrada">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Relação R/L:</span>
                    <span class="result-value" id="relacaoRL">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">RPM de Potência Máxima:</span>
                    <span class="result-value" id="rpmMax">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Velocidade Média do Pistão:</span>
                    <span class="result-value" id="velocidadePistao">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Torque Específico:</span>
                    <span class="result-value" id="torqueEspecifico">-</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Pressão de Sobrealimentação:</span>
                    <span class="result-value" id="pressaoSobre">-</span>
                </div>
                
                <h3 class="section-title">Avisos e Recomendações</h3>
                <div id="avisos"></div>
            </div>
        </div>
        
        <footer>
            <p>Calculadora baseada nos princípios do livro "Performance de motores de 4 tempos" de A. Graham Bell</p>
        </footer>
    </div>

    <script>
        // Variável global para controlar a aba ativa
        let abaAtiva = 'Velocidade';
        
        // Função para converter vírgula em ponto para cálculos
        function parseNumber(value) {
            if (typeof value === 'string') {
                // Remove possíveis espaços e substitui vírgula por ponto
                return parseFloat(value.replace(/\s/g, '').replace(',', '.'));
            }
            return value;
        }
        
        // Função para formatar número no padrão brasileiro
        function formatNumber(value, decimals = 2) {
            if (isNaN(value)) return '-';
            return value.toFixed(decimals).replace('.', ',');
        }
        
        // Inicialização das abas
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].className = tabcontent[i].className.replace(" active", "");
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).className += " active";
            evt.currentTarget.className += " active";
            
            // Atualizar a aba ativa
            abaAtiva = tabName;
        }
        
        // Função para obter as relações de marcha
        function getRelacoesMarcha() {
            const marchas = [];
            for (let i = 1; i <= 6; i++) {
                const valor = document.getElementById(`marcha${i}`).value;
                if (valor && valor.trim() !== '') {
                    marchas.push(parseNumber(valor));
                }
            }
            return marchas;
        }
        
        // Função principal de cálculo
        function calcular() {
            try {
                // Obter valores dos inputs e converter para formato numérico
                const diametroPistao = parseNumber(document.getElementById('diametroPistao').value);
                const cursoPistao = parseNumber(document.getElementById('cursoPistao').value);
                const numCilindros = parseNumber(document.getElementById('numCilindros').value);
                const numValvulas = parseNumber(document.getElementById('numValvulas').value);
                const tamanhoBiela = parseNumber(document.getElementById('tamanhoBiela').value);
                const relacaoDiferencial = parseNumber(document.getElementById('relacaoDiferencial').value);
                const marchas = getRelacoesMarcha();
                const marchaMaisLonga = marchas.length > 0 ? Math.min(...marchas) : 1;
                
                // Validar entradas
                if ([diametroPistao, cursoPistao, numCilindros, numValvulas, tamanhoBiela, relacaoDiferencial].some(isNaN)) {
                    alert('Por favor, preencha todos os campos do motor com valores numéricos válidos.');
                    return;
                }
                
                // Cálculos básicos do motor
                const raioPistao = diametroPistao / 20; // mm para cm
                const areaPistao = Math.PI * Math.pow(raioPistao, 2);
                const cilindradaUnitaria = areaPistao * (cursoPistao / 10); // cm³
                const cilindradaTotal = cilindradaUnitaria * numCilindros;
                
                // Relação R/L corrigida: (1/2 do curso) / comprimento da biela
                const relacaoRL = (cursoPistao / 2) / tamanhoBiela;
                
                // RPM de potência máxima com limite realista
                // Velocidade média do pistão não deve exceder 21 m/s (F1)
                const velocidadePistaoMax = 21; // m/s
                const rpmMaxRealista = (velocidadePistaoMax * 30000) / cursoPistao;
                
                // Usar RPM mais realista
                let rpmMax = Math.min(8000, rpmMaxRealista);
                
                // Velocidade média do pistão
                const velocidadePistao = (2 * cursoPistao * rpmMax) / 60000; // m/s
                
                // Torque e potência necessários (cálculos simplificados)
                const potenciaRoda = calcularPotenciaRoda();
                
                // Cálculo do torque na roda para velocidade máxima
                // Primeiro precisamos da velocidade do veículo na rotação de potência máxima
                const diametroPneu = parseNumber(document.getElementById('diametroPneu').value);
                const raioPneu = diametroPneu / 2000; // mm para m
                const perimetroPneu = 2 * Math.PI * raioPneu; // m
                
                // RPM na roda para velocidade máxima
                const velocidadeMax = parseNumber(document.getElementById('velocidadeMax').value);
                const rpmRoda = (velocidadeMax * 1000) / (60 * perimetroPneu); // RPM na roda
                
                // RPM no motor para velocidade máxima (usando a marcha mais longa e o diferencial)
                const rpmMotorVelMax = rpmRoda * marchaMaisLonga * relacaoDiferencial;
                
                // Torque na roda (usando a fórmula P = T * ω)
                const torqueRodaNm = (potenciaRoda * 735.5) / (rpmRoda * Math.PI / 30);
                const torqueRodaKgfm = torqueRodaNm / 9.80665;
                
                // Eficiência da transmissão
                const eficienciaTransmissao = calcularEficienciaTransmissao();
                
                // Potência no motor
                const potenciaMotor = potenciaRoda / eficienciaTransmissao;
                
                // Cálculo do torque no motor usando a fórmula fornecida: CV = (Torque (kgfm) × RPM × 0,85) / 716
                // Rearranjando: Torque (kgfm) = (CV × 716) / (RPM × 0,85)
                const torqueMotorKgfm = (potenciaMotor * 716) / (rpmMax * 0.85);
                
                // Torque específico (kgfm por 1000 cm³)
                const torqueEspecifico = torqueMotorKgfm / (cilindradaTotal / 1000);
                
                // Pressão de sobrealimentação necessária
                let pressaoSobre = 0;
                if (velocidadePistao > 15) {
                    // Calcular pressão adicional necessária para compensar a alta velocidade do pistão
                    const fatorPressao = Math.max(0, (velocidadePistao - 15) / 5);
                    pressaoSobre = 0.5 + (fatorPressao * 0.3); // bar
                }
                
                // Exibir resultados formatados
                document.getElementById('potenciaRoda').textContent = formatNumber(potenciaRoda, 2) + " CV";
                document.getElementById('torqueRoda').textContent = formatNumber(torqueRodaKgfm, 2) + " kgfm";
                document.getElementById('potenciaMotor').textContent = formatNumber(potenciaMotor, 2) + " CV";
                document.getElementById('torqueMotor').textContent = formatNumber(torqueMotorKgfm, 2) + " kgfm";
                document.getElementById('cilindrada').textContent = formatNumber(cilindradaTotal, 2) + " cm³";
                document.getElementById('relacaoRL').textContent = formatNumber(relacaoRL, 3);
                document.getElementById('rpmMax').textContent = formatNumber(rpmMax, 0) + " RPM";
                document.getElementById('velocidadePistao').textContent = formatNumber(velocidadePistao, 2) + " m/s";
                document.getElementById('torqueEspecifico').textContent = formatNumber(torqueEspecifico, 2) + " kgfm/1000cm³";
                document.getElementById('pressaoSobre').textContent = pressaoSobre > 0 ? formatNumber(pressaoSobre, 2) + " bar" : "Não necessária";
                
                // Gerar avisos
                gerarAvisos(relacaoRL, velocidadePistao, torqueEspecifico, pressaoSobre);
                
            } catch (error) {
                console.error('Erro no cálculo:', error);
                alert('Ocorreu um erro durante o cálculo. Verifique os valores informados.');
            }
        }
        
        function calcularPotenciaRoda() {
            // Cálculo simplificado da potência necessária na roda
            // Baseado na aba ativa
            
            switch(abaAtiva) {
                case 'Velocidade':
                    const velocidade = parseNumber(document.getElementById('velocidadeMax').value);
                    const peso = parseNumber(document.getElementById('pesoVeiculo').value);
                    const cd = parseNumber(document.getElementById('coeficienteAr').value);
                    const area = parseNumber(document.getElementById('areaFrontal').value);
                    
                    // Validar entradas
                    if ([velocidade, peso, cd, area].some(isNaN)) {
                        alert('Por favor, preencha todos os campos de velocidade com valores numéricos válidos.');
                        return 0;
                    }
                    
                    // Potência para vencer resistência do ar e rolamento
                    return (0.5 * 1.2 * cd * area * Math.pow(velocidade/3.6, 3) + 0.015 * peso * 9.8 * velocidade/3.6) / 735.5;
                    
                case 'Aceleracao':
                    const tempo0a100 = parseNumber(document.getElementById('tempo0a100').value);
                    const pesoAcel = parseNumber(document.getElementById('pesoVeiculoAcel').value);
                    
                    // Validar entradas
                    if ([tempo0a100, pesoAcel].some(isNaN)) {
                        alert('Por favor, preencha todos os campos de aceleração com valores numéricos válidos.');
                        return 0;
                    }
                    
                    // Potência para acelerar o veículo (Física básica: E = 0.5*m*v²)
                    const energia = 0.5 * pesoAcel * Math.pow(100/3.6, 2);
                    return (energia / tempo0a100) / 735.5;
                    
                case 'Rampa':
                    const inclinacao = parseNumber(document.getElementById('inclinacaoRampa').value);
                    const pesoRampa = parseNumber(document.getElementById('pesoVeiculoRampa').value);
                    const velocidadeRampa = 50; // km/h assumidos para subir a rampa
                    
                    // Validar entradas
                    if ([inclinacao, pesoRampa].some(isNaN)) {
                        alert('Por favor, preencha todos os campos de rampa com valores numéricos válidos.');
                        return 0;
                    }
                    
                    // Força para subir a rampa: F = m*g*sin(θ)
                    const angulo = Math.atan(inclinacao/100);
                    const forca = pesoRampa * 9.8 * Math.sin(angulo);
                    
                    // Potência: P = F*v
                    return (forca * velocidadeRampa/3.6) / 735.5;
                    
                case 'Carga':
                    const pesoCarga = parseNumber(document.getElementById('pesoCarga').value);
                    const atrito = parseNumber(document.getElementById('coeficienteAtrito').value);
                    const velocidadeCarga = 20; // km/h assumidos para arrastar a carga
                    
                    // Validar entradas
                    if ([pesoCarga, atrito].some(isNaN)) {
                        alert('Por favor, preencha todos os campos de carga com valores numéricos válidos.');
                        return 0;
                    }
                    
                    // Força de atrito: F = μ*m*g
                    const forcaAtrito = atrito * pesoCarga * 9.8;
                    
                    // Potência: P = F*v
                    return (forcaAtrito * velocidadeCarga/3.6) / 735.5;
                    
                default:
                    return 150; // Valor padrão
            }
        }
        
        function calcularEficienciaTransmissao() {
            const tracao = document.getElementById('tracao').value;
            const posicaoMotor = document.getElementById('posicaoMotor').value;
            
            // Eficiências típicas de transmissão
            let eficiencia = 0.85; // Base para tração traseira
            
            if (tracao === 'dianteira') eficiencia *= 0.97;
            else if (tracao === '4x4') eficiencia *= 0.90;
            
            if (posicaoMotor === 'dianteiroTransversal') eficiencia *= 0.98;
            else if (posicaoMotor === 'central') eficiencia *= 0.95;
            else if (posicaoMotor === 'traseiro') eficiencia *= 0.92;
            
            return eficiencia;
        }
        
        function gerarAvisos(relacaoRL, velocidadePistao, torqueEspecifico, pressaoSobre) {
            const avisosDiv = document.getElementById('avisos');
            avisosDiv.innerHTML = '';
            
            // Relação R/L: quanto menor, melhor (≤ 0.3 é bom)
            if (relacaoRL <= 0.3) {
                avisosDiv.innerHTML += `<p class="success">✓ Relação R/L excelente (${formatNumber(relacaoRL, 3)}). Ideal para altas rotações.</p>`;
            } else if (relacaoRL <= 0.4) {
                avisosDiv.innerHTML += `<p class="success">✓ Relação R/L boa (${formatNumber(relacaoRL, 3)}).</p>`;
            } else {
                avisosDiv.innerHTML += `<p class="warning">⚠️ Relação R/L alta (${formatNumber(relacaoRL, 3)}). Motores com R/L menor giram mais suave e rápido.</p>`;
            }
            
            // Velocidade do pistão
            if (velocidadePistao > 20) {
                avisosDiv.innerHTML += `<p class="danger">❌ Velocidade média do pistão muito alta (${formatNumber(velocidadePistao, 2)} m/s)! Nível de competição apenas.</p>`;
                avisosDiv.innerHTML += `<p class="warning">⚠️ Necessária sobrealimentação de ${formatNumber(pressaoSobre, 2)} bar para compensar.</p>`;
            } else if (velocidadePistao > 15) {
                avisosDiv.innerHTML += `<p class="warning">⚠️ Velocidade média do pistão alta (${formatNumber(velocidadePistao, 2)} m/s). Componentes devem ser de alta qualidade.</p>`;
                avisosDiv.innerHTML += `<p class="warning">⚠️ Recomendada sobrealimentação de ${formatNumber(pressaoSobre, 2)} bar.</p>`;
            } else {
                avisosDiv.innerHTML += `<p class="success">✓ Velocidade média do pistão dentro dos parâmetros seguros (${formatNumber(velocidadePistao, 2)} m/s)</p>`;
            }
            
            // Torque específico
            if (torqueEspecifico > 11.5) {
                avisosDiv.innerHTML += '<p class="warning">⚠️ Torque específico alto. Sistema de sobrealimentação recomendado.</p>';
            } else if (torqueEspecifico > 9) {
                avisosDiv.innerHTML += '<p class="success">✓ Torque específico bom para motor aspirado.</p>';
            } else {
                avisosDiv.innerHTML += '<p class="warning">⚠️ Torque específico baixo. Considere aumentar a cilindrada ou taxa de compressão.</p>';
            }
            
            // Verificar se há marchas suficientes
            const relacaoMarchas = getRelacoesMarcha();
            if (relacaoMarchas.length < 4) {
                avisosDiv.innerHTML += '<p class="warning">⚠️ Número de marchas pode ser insuficiente para boa performance.</p>';
            }
        }
        
        // Adicionar event listeners quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar o botão calcular
            document.getElementById('calcularBtn').addEventListener('click', calcular);
            
            // Adicionar validação em tempo real para os campos numéricos
            const numericInputs = document.querySelectorAll('input[type="text"]');
            numericInputs.forEach(input => {
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/[^0-9,]/g, '');
                });
            });
        });
    </script>
</body>
</html>